<!DOCTYPE html> 
<html lang="en">
<head>
<title>GTK+ widgets</title>
<link rel="stylesheet" href="/cfg/style.css" type="text/css">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="GUI, Widgets, GTK+ library, C, GtkButton, 
GtkLabel, GtkFrame, GtkCheckButton">
<meta name="description" content="In this part of the GTK+ tutorial, we cover basic GTK+ widgets, including
GtkButton, GtkCheckButton, GtkFrame, and GtkLabel.">
<meta name="author" content="Jan Bodnar">

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5536206-1', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body>

<header>

<div>
<a href="/" title="Home">ZetCode</a>
</div>

<nav>
    <a title="All tutorials" href="/all/">All</a>
    <a title="Spring Boot tutorials" href="/all/#springboot">Spring Boot</a>
    <a title="Python tutorials" href="/all/#python">Python</a>
    <a title="C# tutorials" href="/all/#csharp">C#</a>
    <a title="Java tutorials" href="/all/#java">Java</a>
    <a title="JavaScript tutorials" href="/all/#js">JavaScript</a>
    <a title="Subscribe to ZetCode news" href="http://zetcode.us13.list-manage.com/subscribe?u=9def9ccd4c70dbbaf691f90fc&id=6556210f80">Subscribe</a>
</nav>

</header>

<div class="container">

<div class="ltow">
    
<div id="ebooks">

<h2 class="blu">Ebooks</h2>

<ul>
<li><a href="/ebooks/advancedpyqt5/">PyQt5 ebook</a></li>
<li><a href="/ebooks/tkinter/">Tkinter ebook</a></li>
<li><a href="/ebooks/sqlitepython/">SQLite Python</a></li>
<li><a href="/ebooks/advancedwxpython/">wxPython ebook</a></li>
<li><a href="/ebooks/windowsapi/">Windows API ebook</a></li>
<li><a href="/ebooks/advancedjavaswing/">Java Swing ebook</a></li>
<li><a href="/ebooks/javagames/">Java games ebook</a></li>
<li><a href="/ebooks/mysqljava/">MySQL Java ebook</a></li>
</ul>

</div>

</div>


<div class="content">


<nav>
<a href="..">Contents</a>
<a href="../gtkdialogs/">Previous</a>
<a href="../gtkwidgetsII/">Next</a>
</nav>


<h1>GTK+ Widgets</h1>

<p class="last_mod">
last modified July 16, 2020 
</p>

<p>
In this part of the GTK+ programming tutorial, we will introduce some GTK+ widgets.
</p>

<div class="ad-top square-fix-ad">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- square-fixed-2020 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:250px"
     data-ad-client="ca-pub-9706709751191532"
     data-ad-slot="6775384732"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

<p>
Widgets are basic building blocks of a GUI application. Over the years, 
several widgets became a standard in programming toolkits; for example a button, 
a check box, or a scroll bar. The GTK+ toolkit's 
philosophy is to keep the number of widgets at a minimum level. More 
specialised widgets are created as custom GTK+ widgets.
</p>


<h2>GtkButton</h2>

<p>
<code>GtkButton</code> is a simple widget that is used to trigger an action. 
</p>

<div class="codehead">button.c</div>
<pre class="code">
#include &lt;gtk/gtk.h&gt;

int main(int argc, char *argv[]) {
    
  GtkWidget *window;
  GtkWidget *halign;
  GtkWidget *btn;

  gtk_init(&amp;argc, &amp;argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  gtk_window_set_title(GTK_WINDOW(window), "GtkButton");
  gtk_window_set_default_size(GTK_WINDOW(window), 230, 150);
  gtk_container_set_border_width(GTK_CONTAINER(window), 15);
  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);

  halign = gtk_alignment_new(0, 0, 0, 0);
  gtk_container_add(GTK_CONTAINER(window), halign);

  btn = gtk_button_new_with_label("Quit");
  gtk_widget_set_size_request(btn, 70, 30);

  gtk_container_add(GTK_CONTAINER(halign), btn);

  g_signal_connect(G_OBJECT(btn), "clicked", 
      G_CALLBACK(gtk_main_quit), G_OBJECT(window));

  g_signal_connect(G_OBJECT(window), "destroy", 
      G_CALLBACK(gtk_main_quit), NULL);

  gtk_widget_show_all(window);

  gtk_main();

  return 0;
}
</pre>

<p>
The example shows a button that is positioned in the upper-left corner
of the window. The application quits when we click on the button.
</p>

<pre class="explanation">
btn = gtk_button_new_with_label("Quit");
</pre>

<p>
The <code>gtk_button_new_with_label()</code> creates a new <code>GtkButton</code> with a label.
</p>

<pre class="explanation">
g_signal_connect(G_OBJECT(btn), "clicked", 
    G_CALLBACK(gtk_main_quit), G_OBJECT(window));
</pre>

<p>
The button's <code>clicked</code> signal is connected to the 
<code>gtk_main_quit()</code> function, which terminates the application.
</p>

<figure>
<img src="/img/gui/cgtk/gtkbutton.png" alt="GtkButton">
<figcaption>Figure: GtkButton</figcaption>
</figure>


<h2>GtkCheckButton</h2>

<p>
<code>GtkCheckButton</code> is a widget that has two states: on and off. 
The on state is visualized by a check mark. 
</p>

<div class="codehead">checkbutton.c</div>
<pre class="code">
#include &lt;gtk/gtk.h&gt;

void toggle_title(GtkWidget *widget, gpointer window) {
    
  if (gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(widget))) {
    gtk_window_set_title(window, "GtkCheckButton");     
  } else {
    gtk_window_set_title(window, "");
  }
}

int main(int argc, char** argv) {

  GtkWidget *window;
  GtkWidget *halign;
  GtkWidget *cb;

  gtk_init(&amp;argc, &amp;argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_container_set_border_width(GTK_CONTAINER(window), 15);
  gtk_window_set_default_size(GTK_WINDOW(window), 230, 150);
  gtk_window_set_title(GTK_WINDOW(window), "GtkCheckButton");

  halign = gtk_alignment_new(0, 0, 0, 0);
  gtk_container_add(GTK_CONTAINER(window), halign);

  cb = gtk_check_button_new_with_label("Show title");
  gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(cb), TRUE);
  
  GTK_WIDGET_UNSET_FLAGS(cb, GTK_CAN_FOCUS);
  gtk_container_add(GTK_CONTAINER(halign), cb);

  g_signal_connect(window, "destroy",
      G_CALLBACK(gtk_main_quit), NULL);

  g_signal_connect(cb, "clicked", 
      G_CALLBACK(toggle_title), (gpointer) window);

  gtk_widget_show_all(window);

  gtk_main();

  return 0;
}
</pre>

<p>
The example displays a window title depending on the state of the <code>GtkCheckButton</code>. 
</p>

<pre class="explanation">
cb = gtk_check_button_new_with_label("Show title");
gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(cb), TRUE);
</pre>

<p>
The <code>GtkCheckButton</code> is created and is marked by default;
the title is initially shown.
</p>

<pre class="explanation">
GTK_WIDGET_UNSET_FLAGS(cb, GTK_CAN_FOCUS);
</pre>

<p>
This code line disables the focus.  
</p>

<pre class="explanation">
if (gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(widget))) {
  gtk_window_set_title(window, "GtkCheckButton");     
} else {
  gtk_window_set_title(window, "");
}
</pre>

<p>
We show the title of the window, depending on the state of the 
<code>GtkCheckButton</code>. To set a title of the window, we use
the <code>gtk_window_set_title()</code>.
</p>

<figure>
<img src="/img/gui/cgtk/gtkcheckbutton.png" alt="GtkCheckButton">
<figcaption>Figure: GtkCheckButton</figcaption>
</figure>


<h2>GtkFrame</h2>

<p>
<code>GtkFrame</code> is a bin with a decorative frame and optional label.
</p>

<div class="codehead">frames.c</div>
<pre class="code">
#include &lt;gtk/gtk.h&gt;

int main(int argc, char *argv[]) {
    
  GtkWidget *window;
  GtkWidget *table;

  GtkWidget *frame1;
  GtkWidget *frame2;
  GtkWidget *frame3;
  GtkWidget *frame4;

  gtk_init(&amp;argc, &amp;argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_window_set_default_size(GTK_WINDOW(window), 250, 250);
  gtk_window_set_title(GTK_WINDOW(window), "GtkFrame");
  
  gtk_container_set_border_width(GTK_CONTAINER(window), 10);

  table = gtk_table_new(2, 2, TRUE);
  gtk_table_set_row_spacings(GTK_TABLE(table), 10);
  gtk_table_set_col_spacings(GTK_TABLE(table), 10);
  gtk_container_add(GTK_CONTAINER(window), table);

  frame1 = gtk_frame_new("Shadow In");
  gtk_frame_set_shadow_type(GTK_FRAME(frame1), GTK_SHADOW_IN);
  frame2 = gtk_frame_new("Shadow Out");
  gtk_frame_set_shadow_type(GTK_FRAME(frame2), GTK_SHADOW_OUT);
  frame3 = gtk_frame_new("Shadow Etched In");
  gtk_frame_set_shadow_type(GTK_FRAME(frame3), GTK_SHADOW_ETCHED_IN);
  frame4 = gtk_frame_new("Shadow Etched Out");
  gtk_frame_set_shadow_type(GTK_FRAME(frame4), GTK_SHADOW_ETCHED_OUT);

  gtk_table_attach_defaults(GTK_TABLE(table), frame1, 0, 1, 0, 1);
  gtk_table_attach_defaults(GTK_TABLE(table), frame2, 0, 1, 1, 2);
  gtk_table_attach_defaults(GTK_TABLE(table), frame3, 1, 2, 0, 1);
  gtk_table_attach_defaults(GTK_TABLE(table), frame4, 1, 2, 1, 2);

  g_signal_connect(G_OBJECT(window), "destroy",
        G_CALLBACK(gtk_main_quit), G_OBJECT(window));

  gtk_widget_show_all(window);

  gtk_main();

  return 0;
}
</pre>

<p>
The example shows four different frame types. The frames are 
attached into a table container. 
</p>

<pre class="explanation">
frame1 = gtk_frame_new("Shadow In");
</pre>

<p>
The <code>gtk_frame_new()</code> function creates a <code>GtkFrame</code>
with an optional label.
</p>

<pre class="explanation">
gtk_frame_set_shadow_type(GTK_FRAME(frame1), GTK_SHADOW_IN);
</pre>

<p>
The <code>gtk_frame_set_shadow_type()</code> function sets a shadow type
for a frame.
</p>

<figure>
<img src="/img/gui/cgtk/frames.png" alt="GtkFrame">
<figcaption>Figure: GtkFrame</figcaption>
</figure>

<div class="ad-mid square-fix-ad">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- square-fixed-2020 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:250px"
     data-ad-client="ca-pub-9706709751191532"
     data-ad-slot="6775384732"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>


<h2>GtkHScale</h2>

<p>
<code>GtkHScale</code> is a horizontal slider widget for selecting a value 
from a range of values.
</p>

<div class="codehead">hscale.c</div>
<pre class="code">
void value_changed(GtkRange *range, gpointer win) {
    
   gdouble val = gtk_range_get_value(range);
   gchar *str = g_strdup_printf("%.f", val);    
   gtk_label_set_text(GTK_LABEL(win), str);
   
   g_free(str);
}

int main(int argc, char *argv[]) {

  GtkWidget *window;
  GtkWidget *halign;
  GtkWidget *hbox;
  GtkWidget *hscale;
  GtkWidget *label;

  gtk_init(&amp;argc, &amp;argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_window_set_default_size(GTK_WINDOW(window), 300, 250);
  gtk_container_set_border_width(GTK_CONTAINER(window), 10);
  gtk_window_set_title(GTK_WINDOW(window), "GtkHScale");
  
  hbox = gtk_hbox_new(FALSE, 20);

  hscale = gtk_hscale_new_with_range(0, 100, 1);
  gtk_scale_set_draw_value(GTK_SCALE(hscale), FALSE);
  gtk_widget_set_size_request(hscale, 150, -1);
  label = gtk_label_new("...");
  gtk_misc_set_alignment(GTK_MISC(label), 0.0, 1);
  
  gtk_box_pack_start(GTK_BOX(hbox), hscale, FALSE, FALSE, 0);
  gtk_box_pack_start(GTK_BOX(hbox), label, FALSE, FALSE, 0);

  halign = gtk_alignment_new(0, 0, 0, 0);
  gtk_container_add(GTK_CONTAINER(halign), hbox);
  gtk_container_add(GTK_CONTAINER(window), halign);

  g_signal_connect(window, "destroy",
      G_CALLBACK(gtk_main_quit), NULL);
      
  g_signal_connect(hscale, "value-changed",
      G_CALLBACK(value_changed), label);      

  gtk_widget_show_all(window);

  gtk_main();

  return 0;
}
</pre>

<p>
In the example, we have a horizontal scale widget and a label widget.
The currently chosen value is displayed in the label.
</p>

<pre class="explanation">
gdouble val = gtk_range_get_value(range);
</pre>

<p>
The <code>gtk_range_get_value()</code> function retrieves the
currently selected value from the scale widget.
</p>

<pre class="explanation">
gchar *str = g_strdup_printf("%.f", val);    
gtk_label_set_text(GTK_LABEL(win), str);
</pre>

<p>
We build a string value with the <code>g_strdup_printf()</code> function and
set it to the label with the <code>gtk_label_set_text()</code> function.
</p>

<pre class="explanation">
hscale = gtk_hscale_new_with_range(0, 100, 1);
</pre>

<p>
The <code>gtk_hscale_new_with_range()</code> function creates a new horizontal 
scale widget with the given range. The first parameter is the minimum value,
the second parameter is the maximum value, and the last parameter is the step.
</p>

<pre class="explanation">
gtk_scale_set_draw_value(GTK_SCALE(hscale), FALSE);
</pre>

<p>
The <code>gtk_scale_set_draw_value()</code> specifies whether the current value 
is displayed as a string next to the slider. We turn the value off. Instead, we
programmatically set it to the label widget.
</p>


<figure>
<img src="/img/gui/cgtk/gtkhscale.png" alt="GtkHScale">
<figcaption>Figure: GtkHScale</figcaption>
</figure>


<h2>GtkLabel</h2>

<p>
The <code>GtkLabel</code> widget displays text. 
</p>

<div class="codehead">label.c</div>
<pre class="code">
#include &lt;gtk/gtk.h&gt;

int main(int argc, char *argv[]) {
    
  GtkWidget *window;
  GtkWidget *label;

  gtk_init(&amp;argc, &amp;argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_window_set_title(GTK_WINDOW(window), "No sleep");
  gtk_container_set_border_width(GTK_CONTAINER(window), 15);

  label = gtk_label_new("I've always been too lame\n\
To see what's before me\n\
And I know nothing sweeter than\n\
Champaign from last New Years\n\
Sweet music in my ears\n\
And a night full of no fears\n\
\n\
But if I had one wish fulfilled tonight\n\
I'd ask for the sun to never rise\n\
If God passed a mic to me to speak\n\
I'd say \"Stay in bed, world,\n\
Sleep in peace");

  gtk_label_set_justify(GTK_LABEL(label), GTK_JUSTIFY_CENTER);
  gtk_container_add(GTK_CONTAINER(window), label);

  g_signal_connect(window, "destroy",
      G_CALLBACK(gtk_main_quit), NULL);

  gtk_widget_show_all(window);

  gtk_main();

  return 0;
}
</pre>

<p>
The example shows two verses of a song.
</p>

<pre class="explanation">
  label = gtk_label_new("I've always been too lame\n\
To see what's before me\n\
...
</pre>

<p>
We create a <code>GtkLabel</code> widget. We can create 
multiline text label by using a new line character. Note the escape 
character. We use a rather long string and we do not want to put all the text into 
one line. In such cases, we can use an escape character. 
</p>

<pre class="explanation">
gtk_label_set_justify(GTK_LABEL(label), GTK_JUSTIFY_CENTER);
</pre>

<p>
The <code>gtk_label_set_justify()</code> function aligns the text in
the label. With the <code>GTK_JUSTIFY_CENTER</code> type, the text
is centered.
</p>

<figure>
<img src="/img/gui/cgtk/label.png" alt="GtkLabel">
<figcaption>Figure: GtkLabel</figcaption>
</figure>


<h2>Label with markup</h2>

<p>
<code>GtkLabel</code> can also display markup language. The markup is the
Pango text markup language. 
</p>

<div class="codehead">markup.c</div>
<pre class="code">
#include &lt;gtk/gtk.h&gt;

int main(int argc, char *argv[]) {
    
  GtkWidget *window;
  GtkWidget *label;

  gtk_init(&amp;argc, &amp;argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_window_set_default_size(GTK_WINDOW(window), 300, 100);
  gtk_window_set_title(GTK_WINDOW(window), "Markup label");

  gchar *str = "&lt;b&gt;ZetCode&lt;/b&gt;, knowledge only matters";

  label = gtk_label_new(NULL);
  gtk_label_set_markup(GTK_LABEL(label), str);

  gtk_container_add(GTK_CONTAINER(window), label);
  gtk_widget_show(label);

  g_signal_connect(window, "destroy",
      G_CALLBACK(gtk_main_quit), NULL);

  gtk_widget_show(window);

  gtk_main();

  return 0;
}
</pre>

<p>
The example shows a portion of text in bold. 
</p>

<pre class="explanation">
gchar *str = "&lt;b&gt;ZetCode&lt;/b&gt;, knowledge only matters";
</pre>

<p>
This is the string that is displayed. It contains a simple markup. 
</p>

<pre class="explanation">
label = gtk_label_new(NULL);
</pre>

<p>
We create an empty label.
</p>

<pre class="explanation">
gtk_label_set_markup(GTK_LABEL(label), str);
</pre>

<p>
The <code>gtk_label_set_markup()</code> parses the string which is 
marked up and applies its attributes to the label.
</p>

<figure>
<img src="/img/gui/cgtk/markuplabel.png" alt="markup label">
<figcaption>Figure: markup label</figcaption>
</figure>

<p>
In this part of the GTK+ tutorial, we have covered GTK+ widgets.
</p>

<div class="ad-bot square-fix-ad">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- square-fixed-2020 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:250px"
     data-ad-client="ca-pub-9706709751191532"
     data-ad-slot="6775384732"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

<nav>
<a href="..">Contents</a>
<a href="../gtkdialogs/">Previous</a>
<a href="../gtkwidgetsII/">Next</a>
</nav>



</div> <!-- content -->

<div class="rtow">

<div class="vert-ad">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- vertical-2020 -->
<ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-9706709751191532"
        data-ad-slot="5880603481"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
<script>
        (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

<div class="square-fix-ad ad-rtow">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- square-fixed-2020 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:250px"
     data-ad-client="ca-pub-9706709751191532"
     data-ad-slot="6775384732"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

</div> <!-- rtow -->

</div> <!-- container -->

<footer>

<nav>
<a title="Home page" href="/">Home</a> 
<a title="Follow on Facebook" href="https://www.facebook.com/zetcode7/">Facebook</a>
<a title="Follow on Twitter" href="https://twitter.com/janbodnar">Twitter</a>
<a title="Visit Github" href="https://github.com/janbodnar">Github</a>
<a title="Subscribe to ZetCode news" href="http://zetcode.us13.list-manage.com/subscribe?u=9def9ccd4c70dbbaf691f90fc&id=6556210f80">Subscribe</a>
<a title="Privacy policy" href="/privacy">Privacy</a> 
</nav>

<div>
<span>&copy; 2007 - 2021 Jan Bodnar</span>
<span>admin(at)zetcode.com</span>
</div>

</footer>

</body>
</html>


